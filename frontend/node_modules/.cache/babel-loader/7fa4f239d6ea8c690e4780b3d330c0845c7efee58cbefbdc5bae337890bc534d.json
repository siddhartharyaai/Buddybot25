{"ast":null,"code":"import _objectSpread from\"/app/frontend/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import React,{useState,useEffect}from'react';import{BrowserRouter,Routes,Route,Navigate}from'react-router-dom';import{motion}from'framer-motion';import toast from'react-hot-toast';import{v4 as uuidv4}from'uuid';import Layout from'./components/Layout';import Header from'./components/Header';import ProfileSetup from'./components/ProfileSetup';import ParentalControls from'./components/ParentalControls';import SimplifiedChatInterface from'./components/SimplifiedChatInterface';import StoriesPage from'./components/StoriesPage';import ProfilePage from'./components/ProfilePage';import SettingsPage from'./components/SettingsPage';import'./App.css';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const BACKEND_URL=process.env.REACT_APP_BACKEND_URL;const API=\"\".concat(BACKEND_URL,\"/api\");const App=()=>{const[user,setUser]=useState(null);const[sessionId,setSessionId]=useState(null);const[isProfileSetupOpen,setIsProfileSetupOpen]=useState(false);const[isParentalControlsOpen,setIsParentalControlsOpen]=useState(false);const[parentalControls,setParentalControls]=useState(null);const[isLoading,setIsLoading]=useState(true);const[darkMode,setDarkMode]=useState(()=>{// Check localStorage for dark mode preference\nconst saved=localStorage.getItem('ai_companion_dark_mode');return saved?JSON.parse(saved):false;});const[chatMessages,setChatMessages]=useState([]);const[chatHistory,setChatHistory]=useState({});useEffect(()=>{checkUserProfile();},[]);useEffect(()=>{// Save dark mode preference to localStorage\nlocalStorage.setItem('ai_companion_dark_mode',JSON.stringify(darkMode));},[darkMode]);// Load chat history when session changes\nuseEffect(()=>{if(sessionId&&user!==null&&user!==void 0&&user.id){loadChatHistory(sessionId);}},[sessionId,user===null||user===void 0?void 0:user.id]);const loadChatHistory=async currentSessionId=>{try{// First try to load from localStorage\nconst savedHistory=localStorage.getItem(\"chat_history_\".concat(user===null||user===void 0?void 0:user.id,\"_\").concat(currentSessionId));if(savedHistory){const messages=JSON.parse(savedHistory);setChatMessages(messages);setChatHistory(prev=>_objectSpread(_objectSpread({},prev),{},{[currentSessionId]:messages}));}else{// Initialize with welcome message if no history exists\nconst welcomeMessage={id:Date.now(),type:'bot',content:\"Hi \".concat(user===null||user===void 0?void 0:user.name,\"! \\uD83D\\uDC4B I'm Buddy, your AI companion. How can I help you today?\"),timestamp:new Date().toISOString()};setChatMessages([welcomeMessage]);setChatHistory(prev=>_objectSpread(_objectSpread({},prev),{},{[currentSessionId]:[welcomeMessage]}));}}catch(error){console.error('Error loading chat history:',error);// Fallback welcome message\nconst welcomeMessage={id:Date.now(),type:'bot',content:\"Hi \".concat(user===null||user===void 0?void 0:user.name,\"! \\uD83D\\uDC4B I'm Buddy, your AI companion. How can I help you today?\"),timestamp:new Date().toISOString()};setChatMessages([welcomeMessage]);}};const saveChatHistory=(currentSessionId,messages)=>{try{localStorage.setItem(\"chat_history_\".concat(user===null||user===void 0?void 0:user.id,\"_\").concat(currentSessionId),JSON.stringify(messages));setChatHistory(prev=>_objectSpread(_objectSpread({},prev),{},{[currentSessionId]:messages}));}catch(error){console.error('Error saving chat history:',error);}};const addMessage=message=>{const newMessage=_objectSpread(_objectSpread({},message),{},{id:Date.now(),timestamp:new Date().toISOString()});setChatMessages(prev=>{const updated=[...prev,newMessage];// Save to localStorage\nif(sessionId){saveChatHistory(sessionId,updated);}return updated;});};const checkUserProfile=async()=>{try{// Check if user profile exists in localStorage\nconst savedUser=localStorage.getItem('ai_companion_user');if(!savedUser){// No user exists, open profile setup\nsetIsProfileSetupOpen(true);setIsLoading(false);return;}// User exists in localStorage, verify it exists in backend\nconst userData=JSON.parse(savedUser);try{// Verify user exists in backend database\nconst response=await fetch(\"\".concat(API,\"/users/profile/\").concat(userData.id),{method:'GET',headers:{'Content-Type':'application/json'}});if(response.ok){// User exists in backend, proceed normally\nconst backendUser=await response.json();setUser(backendUser);await createSession(backendUser.id);await loadParentalControls(backendUser.id);}else{// User doesn't exist in backend, clear localStorage and show setup\nlocalStorage.removeItem('ai_companion_user');setIsProfileSetupOpen(true);}}catch(error){console.error('Error verifying user profile with backend:',error);// Network error, clear localStorage and show setup\nlocalStorage.removeItem('ai_companion_user');setIsProfileSetupOpen(true);}}catch(error){console.error('Error checking user profile:',error);setIsProfileSetupOpen(true);}finally{setIsLoading(false);}};const createSession=async userId=>{try{const response=await fetch(\"\".concat(API,\"/conversations/session\"),{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify({user_id:userId,session_name:'Chat Session'})});const data=await response.json();if(response.ok){setSessionId(data.id);}else{throw new Error(data.detail||'Failed to create session');}}catch(error){console.error('Error creating session:',error);toast.error('Failed to create chat session');}};const loadParentalControls=async userId=>{try{const response=await fetch(\"\".concat(API,\"/users/\").concat(userId,\"/parental-controls\"));const data=await response.json();if(response.ok){setParentalControls(data);}}catch(error){console.error('Error loading parental controls:',error);}};const saveUserProfile=async profileData=>{try{// Filter profile data to only include fields that backend accepts\nconst backendProfileData={name:profileData.name,age:profileData.age,location:profileData.location,timezone:profileData.timezone||'UTC',language:profileData.language||'english',voice_personality:profileData.voice_personality||'friendly_companion',interests:profileData.interests||[],learning_goals:profileData.learning_goals||[],parent_email:profileData.parent_email||null};console.log('Saving profile data:',backendProfileData);const response=await fetch(\"\".concat(API,\"/users/profile\"),{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify(backendProfileData)});const data=await response.json();console.log('Profile save response:',{status:response.status,data});if(response.ok){setUser(data);localStorage.setItem('ai_companion_user',JSON.stringify(data));await createSession(data.id);await loadParentalControls(data.id);toast.success('Profile created successfully!');}else{console.error('Profile save failed:',response.status,data);throw new Error(data.detail||\"Failed to create profile (HTTP \".concat(response.status,\")\"));}}catch(error){console.error('Error saving profile:',error);toast.error(\"Failed to save profile: \".concat(error.message));throw error;}};const updateUserProfile=async profileData=>{try{if(!(user!==null&&user!==void 0&&user.id)){throw new Error('No user profile to update');}// Filter profile data to only include fields that backend accepts\nconst backendProfileData={name:profileData.name,age:profileData.age,location:profileData.location,timezone:profileData.timezone||'UTC',language:profileData.language||'english',voice_personality:profileData.voice_personality||'friendly_companion',interests:profileData.interests||[],learning_goals:profileData.learning_goals||[],parent_email:profileData.parent_email||null};console.log('Updating profile data for user:',user.id,backendProfileData);const response=await fetch(\"\".concat(API,\"/users/profile/\").concat(user.id),{method:'PUT',headers:{'Content-Type':'application/json'},body:JSON.stringify(backendProfileData)});const data=await response.json();console.log('Profile update response:',{status:response.status,data});if(response.ok){setUser(data);localStorage.setItem('ai_companion_user',JSON.stringify(data));toast.success('Profile updated successfully!');}else{console.error('Profile update failed:',response.status,data);throw new Error(data.detail||\"Failed to update profile (HTTP \".concat(response.status,\")\"));}}catch(error){console.error('Error updating profile:',error);toast.error(\"Failed to update profile: \".concat(error.message));throw error;}};const deleteUserProfile=async()=>{try{if(!(user!==null&&user!==void 0&&user.id)){throw new Error('No user profile to delete');}const response=await fetch(\"\".concat(API,\"/users/profile/\").concat(user.id),{method:'DELETE',headers:{'Content-Type':'application/json'}});if(response.ok){// Clear user data and redirect to setup\nsetUser(null);setSessionId(null);localStorage.removeItem('ai_companion_user');setIsProfileSetupOpen(true);toast.success('Profile deleted successfully!');}else{const data=await response.json();throw new Error(data.detail||'Failed to delete profile');}}catch(error){console.error('Error deleting profile:',error);toast.error('Failed to delete profile');throw error;}};const saveParentalControls=async controlsData=>{try{const response=await fetch(\"\".concat(API,\"/users/\").concat(user.id,\"/parental-controls\"),{method:'PUT',headers:{'Content-Type':'application/json'},body:JSON.stringify(controlsData)});const data=await response.json();if(response.ok){setParentalControls(data);toast.success('Parental controls updated successfully!');}else{throw new Error(data.detail||'Failed to update parental controls');}}catch(error){console.error('Error updating parental controls:',error);throw error;}};const WelcomeScreen=()=>/*#__PURE__*/_jsx(\"div\",{className:\"min-h-screen flex items-center justify-center p-4\",children:/*#__PURE__*/_jsxs(motion.div,{initial:{opacity:0,scale:0.9},animate:{opacity:1,scale:1},transition:{duration:0.5},className:\"max-w-4xl mx-auto text-center\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"mb-12\",children:[/*#__PURE__*/_jsx(motion.div,{initial:{y:-20,opacity:0},animate:{y:0,opacity:1},transition:{delay:0.2},className:\"w-24 h-24 bg-gradient-to-br from-blue-500 to-purple-600 rounded-3xl flex items-center justify-center mx-auto mb-6 shadow-2xl\",children:/*#__PURE__*/_jsx(\"svg\",{className:\"w-12 h-12 text-white\",fill:\"none\",stroke:\"currentColor\",viewBox:\"0 0 24 24\",children:/*#__PURE__*/_jsx(\"path\",{strokeLinecap:\"round\",strokeLinejoin:\"round\",strokeWidth:2,d:\"M9.663 17h4.673M12 3v1m6.364 1.636l-.707.707M21 12h-1M4 12H3m3.343-5.657l-.707-.707m2.828 9.9a5 5 0 117.072 0l-.548.547A3.374 3.374 0 0014 18.469V19a2 2 0 11-4 0v-.531c0-.895-.356-1.754-.988-2.386l-.548-.547z\"})})}),/*#__PURE__*/_jsx(motion.h1,{initial:{y:-20,opacity:0},animate:{y:0,opacity:1},transition:{delay:0.3},className:\"text-4xl md:text-6xl font-bold bg-gradient-to-r from-blue-600 to-purple-600 bg-clip-text text-transparent mb-4\",children:\"Meet Your AI Buddy\"}),/*#__PURE__*/_jsx(motion.p,{initial:{y:-20,opacity:0},animate:{y:0,opacity:1},transition:{delay:0.4},className:\"text-xl text-gray-600 max-w-2xl mx-auto mb-8\",children:\"Your smart companion for stories, songs, learning, and fun conversations. Safe, educational, and designed just for you!\"})]}),/*#__PURE__*/_jsxs(motion.div,{initial:{y:20,opacity:0},animate:{y:0,opacity:1},transition:{delay:0.5},className:\"grid grid-cols-1 md:grid-cols-3 gap-8 mb-12\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white/80 backdrop-blur-sm rounded-2xl p-6 shadow-xl border border-gray-100\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"w-12 h-12 bg-blue-100 rounded-xl flex items-center justify-center mx-auto mb-4\",children:/*#__PURE__*/_jsx(\"svg\",{className:\"w-6 h-6 text-blue-600\",fill:\"none\",stroke:\"currentColor\",viewBox:\"0 0 24 24\",children:/*#__PURE__*/_jsx(\"path\",{strokeLinecap:\"round\",strokeLinejoin:\"round\",strokeWidth:2,d:\"M19 11a7 7 0 01-7 7m0 0a7 7 0 01-7-7m7 7v4m0 0H8m4 0h4m-4-8a3 3 0 01-3-3V5a3 3 0 016 0v6a3 3 0 01-3 3z\"})})}),/*#__PURE__*/_jsx(\"h3\",{className:\"text-lg font-semibold text-gray-900 mb-2\",children:\"Voice Chat\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-gray-600\",children:\"Talk naturally with your AI companion using voice messages and responses.\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white/80 backdrop-blur-sm rounded-2xl p-6 shadow-xl border border-gray-100\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"w-12 h-12 bg-purple-100 rounded-xl flex items-center justify-center mx-auto mb-4\",children:/*#__PURE__*/_jsx(\"svg\",{className:\"w-6 h-6 text-purple-600\",fill:\"none\",stroke:\"currentColor\",viewBox:\"0 0 24 24\",children:/*#__PURE__*/_jsx(\"path\",{strokeLinecap:\"round\",strokeLinejoin:\"round\",strokeWidth:2,d:\"M12 6.253v13m0-13C10.832 5.477 9.246 5 7.5 5S4.168 5.477 3 6.253v13C4.168 18.477 5.754 18 7.5 18s3.332.477 4.5 1.253m0-13C13.168 5.477 14.754 5 16.5 5c1.746 0 3.332.477 4.5 1.253v13C19.832 18.477 18.246 18 16.5 18c-1.746 0-3.332.477-4.5 1.253\"})})}),/*#__PURE__*/_jsx(\"h3\",{className:\"text-lg font-semibold text-gray-900 mb-2\",children:\"Stories & Songs\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-gray-600\",children:\"Enjoy bedtime stories, nursery rhymes, and educational content.\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white/80 backdrop-blur-sm rounded-2xl p-6 shadow-xl border border-gray-100\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"w-12 h-12 bg-green-100 rounded-xl flex items-center justify-center mx-auto mb-4\",children:/*#__PURE__*/_jsx(\"svg\",{className:\"w-6 h-6 text-green-600\",fill:\"none\",stroke:\"currentColor\",viewBox:\"0 0 24 24\",children:/*#__PURE__*/_jsx(\"path\",{strokeLinecap:\"round\",strokeLinejoin:\"round\",strokeWidth:2,d:\"M9 12l2 2 4-4m5.618-4.016A11.955 11.955 0 0112 2.944a11.955 11.955 0 01-8.618 3.04A12.02 12.02 0 003 9c0 5.591 3.824 10.29 9 11.622 5.176-1.332 9-6.03 9-11.622 0-1.042-.133-2.052-.382-3.016z\"})})}),/*#__PURE__*/_jsx(\"h3\",{className:\"text-lg font-semibold text-gray-900 mb-2\",children:\"Safe & Secure\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-gray-600\",children:\"Built with child safety in mind, with parental controls and monitoring.\"})]})]}),/*#__PURE__*/_jsx(motion.button,{initial:{y:20,opacity:0},animate:{y:0,opacity:1},transition:{delay:0.6},onClick:()=>setIsProfileSetupOpen(true),className:\"px-8 py-4 bg-gradient-to-r from-blue-500 to-purple-600 text-white rounded-2xl text-lg font-semibold hover:from-blue-600 hover:to-purple-700 transition-all duration-200 shadow-xl hover:shadow-2xl transform hover:scale-105\",children:\"Get Started\"})]})});const ChatPage=()=>/*#__PURE__*/_jsxs(\"div\",{className:\"h-screen flex flex-col\",children:[/*#__PURE__*/_jsx(Header,{user:user,onOpenProfile:()=>setIsProfileSetupOpen(true),onOpenSettings:()=>setIsParentalControlsOpen(true)}),/*#__PURE__*/_jsx(\"div\",{className:\"flex-1 overflow-hidden\",children:/*#__PURE__*/_jsx(SimplifiedChatInterface,{user:user,sessionId:sessionId,darkMode:darkMode,setDarkMode:setDarkMode,messages:chatMessages,onAddMessage:addMessage})})]});const StoriesPageWrapper=()=>/*#__PURE__*/_jsxs(\"div\",{className:\"h-screen flex flex-col\",children:[/*#__PURE__*/_jsx(Header,{user:user,onOpenProfile:()=>setIsProfileSetupOpen(true),onOpenSettings:()=>setIsParentalControlsOpen(true)}),/*#__PURE__*/_jsx(\"div\",{className:\"flex-1 overflow-auto\",children:/*#__PURE__*/_jsx(StoriesPage,{user:user,sessionId:sessionId})})]});const ProfilePageWrapper=()=>/*#__PURE__*/_jsxs(\"div\",{className:\"h-screen flex flex-col\",children:[/*#__PURE__*/_jsx(Header,{user:user,onOpenProfile:()=>setIsProfileSetupOpen(true),onOpenSettings:()=>setIsParentalControlsOpen(true)}),/*#__PURE__*/_jsx(\"div\",{className:\"flex-1 overflow-auto\",children:/*#__PURE__*/_jsx(ProfilePage,{user:user,onOpenProfileSetup:()=>setIsProfileSetupOpen(true)})})]});const SettingsPageWrapper=()=>/*#__PURE__*/_jsxs(\"div\",{className:\"h-screen flex flex-col\",children:[/*#__PURE__*/_jsx(Header,{user:user,onOpenProfile:()=>setIsProfileSetupOpen(true),onOpenSettings:()=>setIsParentalControlsOpen(true)}),/*#__PURE__*/_jsx(\"div\",{className:\"flex-1 overflow-auto\",children:/*#__PURE__*/_jsx(SettingsPage,{user:user,onOpenProfile:()=>setIsProfileSetupOpen(true),onOpenParentalControls:()=>setIsParentalControlsOpen(true)})})]});if(isLoading){return/*#__PURE__*/_jsx(Layout,{children:/*#__PURE__*/_jsx(\"div\",{className:\"min-h-screen flex items-center justify-center\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"text-center\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"w-16 h-16 border-4 border-blue-500 border-t-transparent rounded-full animate-spin mx-auto mb-4\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-gray-600\",children:\"Loading your AI companion...\"})]})})});}return/*#__PURE__*/_jsxs(Layout,{children:[/*#__PURE__*/_jsx(BrowserRouter,{children:/*#__PURE__*/_jsxs(Routes,{children:[/*#__PURE__*/_jsx(Route,{path:\"/\",element:user?/*#__PURE__*/_jsx(Navigate,{to:\"/chat\"}):/*#__PURE__*/_jsx(WelcomeScreen,{})}),/*#__PURE__*/_jsx(Route,{path:\"/chat\",element:user?/*#__PURE__*/_jsx(ChatPage,{}):/*#__PURE__*/_jsx(Navigate,{to:\"/\"})}),/*#__PURE__*/_jsx(Route,{path:\"/stories\",element:user?/*#__PURE__*/_jsx(StoriesPageWrapper,{}):/*#__PURE__*/_jsx(Navigate,{to:\"/\"})}),/*#__PURE__*/_jsx(Route,{path:\"/profile\",element:user?/*#__PURE__*/_jsx(ProfilePageWrapper,{}):/*#__PURE__*/_jsx(Navigate,{to:\"/\"})}),/*#__PURE__*/_jsx(Route,{path:\"/settings\",element:user?/*#__PURE__*/_jsx(SettingsPageWrapper,{}):/*#__PURE__*/_jsx(Navigate,{to:\"/\"})})]})}),/*#__PURE__*/_jsx(ProfileSetup,{isOpen:isProfileSetupOpen,onClose:()=>setIsProfileSetupOpen(false),onSave:user?updateUserProfile:saveUserProfile,onDelete:user?deleteUserProfile:null,initialData:user}),/*#__PURE__*/_jsx(ParentalControls,{isOpen:isParentalControlsOpen,onClose:()=>setIsParentalControlsOpen(false),userId:user===null||user===void 0?void 0:user.id,controls:parentalControls,onSave:saveParentalControls})]});};export default App;","map":{"version":3,"names":["React","useState","useEffect","BrowserRouter","Routes","Route","Navigate","motion","toast","v4","uuidv4","Layout","Header","ProfileSetup","ParentalControls","SimplifiedChatInterface","StoriesPage","ProfilePage","SettingsPage","jsx","_jsx","jsxs","_jsxs","BACKEND_URL","process","env","REACT_APP_BACKEND_URL","API","concat","App","user","setUser","sessionId","setSessionId","isProfileSetupOpen","setIsProfileSetupOpen","isParentalControlsOpen","setIsParentalControlsOpen","parentalControls","setParentalControls","isLoading","setIsLoading","darkMode","setDarkMode","saved","localStorage","getItem","JSON","parse","chatMessages","setChatMessages","chatHistory","setChatHistory","checkUserProfile","setItem","stringify","id","loadChatHistory","currentSessionId","savedHistory","messages","prev","_objectSpread","welcomeMessage","Date","now","type","content","name","timestamp","toISOString","error","console","saveChatHistory","addMessage","message","newMessage","updated","savedUser","userData","response","fetch","method","headers","ok","backendUser","json","createSession","loadParentalControls","removeItem","userId","body","user_id","session_name","data","Error","detail","saveUserProfile","profileData","backendProfileData","age","location","timezone","language","voice_personality","interests","learning_goals","parent_email","log","status","success","updateUserProfile","deleteUserProfile","saveParentalControls","controlsData","WelcomeScreen","className","children","div","initial","opacity","scale","animate","transition","duration","y","delay","fill","stroke","viewBox","strokeLinecap","strokeLinejoin","strokeWidth","d","h1","p","button","onClick","ChatPage","onOpenProfile","onOpenSettings","onAddMessage","StoriesPageWrapper","ProfilePageWrapper","onOpenProfileSetup","SettingsPageWrapper","onOpenParentalControls","path","element","to","isOpen","onClose","onSave","onDelete","initialData","controls"],"sources":["/app/frontend/src/App.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport { BrowserRouter, Routes, Route, Navigate } from 'react-router-dom';\nimport { motion } from 'framer-motion';\nimport toast from 'react-hot-toast';\nimport { v4 as uuidv4 } from 'uuid';\n\nimport Layout from './components/Layout';\nimport Header from './components/Header';\nimport ProfileSetup from './components/ProfileSetup';\nimport ParentalControls from './components/ParentalControls';\nimport SimplifiedChatInterface from './components/SimplifiedChatInterface';\nimport StoriesPage from './components/StoriesPage';\nimport ProfilePage from './components/ProfilePage';\nimport SettingsPage from './components/SettingsPage';\n\nimport './App.css';\n\nconst BACKEND_URL = process.env.REACT_APP_BACKEND_URL;\nconst API = `${BACKEND_URL}/api`;\n\nconst App = () => {\n  const [user, setUser] = useState(null);\n  const [sessionId, setSessionId] = useState(null);\n  const [isProfileSetupOpen, setIsProfileSetupOpen] = useState(false);\n  const [isParentalControlsOpen, setIsParentalControlsOpen] = useState(false);\n  const [parentalControls, setParentalControls] = useState(null);\n  const [isLoading, setIsLoading] = useState(true);\n  const [darkMode, setDarkMode] = useState(() => {\n    // Check localStorage for dark mode preference\n    const saved = localStorage.getItem('ai_companion_dark_mode');\n    return saved ? JSON.parse(saved) : false;\n  });\n  const [chatMessages, setChatMessages] = useState([]);\n  const [chatHistory, setChatHistory] = useState({});\n\n  useEffect(() => {\n    checkUserProfile();\n  }, []);\n\n  useEffect(() => {\n    // Save dark mode preference to localStorage\n    localStorage.setItem('ai_companion_dark_mode', JSON.stringify(darkMode));\n  }, [darkMode]);\n\n  // Load chat history when session changes\n  useEffect(() => {\n    if (sessionId && user?.id) {\n      loadChatHistory(sessionId);\n    }\n  }, [sessionId, user?.id]);\n\n  const loadChatHistory = async (currentSessionId) => {\n    try {\n      // First try to load from localStorage\n      const savedHistory = localStorage.getItem(`chat_history_${user?.id}_${currentSessionId}`);\n      if (savedHistory) {\n        const messages = JSON.parse(savedHistory);\n        setChatMessages(messages);\n        setChatHistory(prev => ({ ...prev, [currentSessionId]: messages }));\n      } else {\n        // Initialize with welcome message if no history exists\n        const welcomeMessage = {\n          id: Date.now(),\n          type: 'bot',\n          content: `Hi ${user?.name}! ðŸ‘‹ I'm Buddy, your AI companion. How can I help you today?`,\n          timestamp: new Date().toISOString()\n        };\n        setChatMessages([welcomeMessage]);\n        setChatHistory(prev => ({ ...prev, [currentSessionId]: [welcomeMessage] }));\n      }\n    } catch (error) {\n      console.error('Error loading chat history:', error);\n      // Fallback welcome message\n      const welcomeMessage = {\n        id: Date.now(),\n        type: 'bot',\n        content: `Hi ${user?.name}! ðŸ‘‹ I'm Buddy, your AI companion. How can I help you today?`,\n        timestamp: new Date().toISOString()\n      };\n      setChatMessages([welcomeMessage]);\n    }\n  };\n\n  const saveChatHistory = (currentSessionId, messages) => {\n    try {\n      localStorage.setItem(`chat_history_${user?.id}_${currentSessionId}`, JSON.stringify(messages));\n      setChatHistory(prev => ({ ...prev, [currentSessionId]: messages }));\n    } catch (error) {\n      console.error('Error saving chat history:', error);\n    }\n  };\n\n  const addMessage = (message) => {\n    const newMessage = {\n      ...message,\n      id: Date.now(),\n      timestamp: new Date().toISOString()\n    };\n    \n    setChatMessages(prev => {\n      const updated = [...prev, newMessage];\n      // Save to localStorage\n      if (sessionId) {\n        saveChatHistory(sessionId, updated);\n      }\n      return updated;\n    });\n  };\n\n  const checkUserProfile = async () => {\n    try {\n      // Check if user profile exists in localStorage\n      const savedUser = localStorage.getItem('ai_companion_user');\n      \n      if (!savedUser) {\n        // No user exists, open profile setup\n        setIsProfileSetupOpen(true);\n        setIsLoading(false);\n        return;\n      }\n      \n      // User exists in localStorage, verify it exists in backend\n      const userData = JSON.parse(savedUser);\n      \n      try {\n        // Verify user exists in backend database\n        const response = await fetch(`${API}/users/profile/${userData.id}`, {\n          method: 'GET',\n          headers: {\n            'Content-Type': 'application/json',\n          },\n        });\n        \n        if (response.ok) {\n          // User exists in backend, proceed normally\n          const backendUser = await response.json();\n          setUser(backendUser);\n          await createSession(backendUser.id);\n          await loadParentalControls(backendUser.id);\n        } else {\n          // User doesn't exist in backend, clear localStorage and show setup\n          localStorage.removeItem('ai_companion_user');\n          setIsProfileSetupOpen(true);\n        }\n      } catch (error) {\n        console.error('Error verifying user profile with backend:', error);\n        // Network error, clear localStorage and show setup\n        localStorage.removeItem('ai_companion_user');\n        setIsProfileSetupOpen(true);\n      }\n    } catch (error) {\n      console.error('Error checking user profile:', error);\n      setIsProfileSetupOpen(true);\n    } finally {\n      setIsLoading(false);\n    }\n  };\n\n  const createSession = async (userId) => {\n    try {\n      const response = await fetch(`${API}/conversations/session`, {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json',\n        },\n        body: JSON.stringify({\n          user_id: userId,\n          session_name: 'Chat Session'\n        })\n      });\n\n      const data = await response.json();\n      if (response.ok) {\n        setSessionId(data.id);\n      } else {\n        throw new Error(data.detail || 'Failed to create session');\n      }\n    } catch (error) {\n      console.error('Error creating session:', error);\n      toast.error('Failed to create chat session');\n    }\n  };\n\n  const loadParentalControls = async (userId) => {\n    try {\n      const response = await fetch(`${API}/users/${userId}/parental-controls`);\n      const data = await response.json();\n      \n      if (response.ok) {\n        setParentalControls(data);\n      }\n    } catch (error) {\n      console.error('Error loading parental controls:', error);\n    }\n  };\n\n  const saveUserProfile = async (profileData) => {\n    try {\n      // Filter profile data to only include fields that backend accepts\n      const backendProfileData = {\n        name: profileData.name,\n        age: profileData.age,\n        location: profileData.location,\n        timezone: profileData.timezone || 'UTC',\n        language: profileData.language || 'english',\n        voice_personality: profileData.voice_personality || 'friendly_companion',\n        interests: profileData.interests || [],\n        learning_goals: profileData.learning_goals || [],\n        parent_email: profileData.parent_email || null\n      };\n\n      console.log('Saving profile data:', backendProfileData);\n\n      const response = await fetch(`${API}/users/profile`, {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json',\n        },\n        body: JSON.stringify(backendProfileData)\n      });\n\n      const data = await response.json();\n      console.log('Profile save response:', { status: response.status, data });\n\n      if (response.ok) {\n        setUser(data);\n        localStorage.setItem('ai_companion_user', JSON.stringify(data));\n        await createSession(data.id);\n        await loadParentalControls(data.id);\n        toast.success('Profile created successfully!');\n      } else {\n        console.error('Profile save failed:', response.status, data);\n        throw new Error(data.detail || `Failed to create profile (HTTP ${response.status})`);\n      }\n    } catch (error) {\n      console.error('Error saving profile:', error);\n      toast.error(`Failed to save profile: ${error.message}`);\n      throw error;\n    }\n  };\n\n  const updateUserProfile = async (profileData) => {\n    try {\n      if (!user?.id) {\n        throw new Error('No user profile to update');\n      }\n\n      // Filter profile data to only include fields that backend accepts\n      const backendProfileData = {\n        name: profileData.name,\n        age: profileData.age,\n        location: profileData.location,\n        timezone: profileData.timezone || 'UTC',\n        language: profileData.language || 'english',\n        voice_personality: profileData.voice_personality || 'friendly_companion',\n        interests: profileData.interests || [],\n        learning_goals: profileData.learning_goals || [],\n        parent_email: profileData.parent_email || null\n      };\n\n      console.log('Updating profile data for user:', user.id, backendProfileData);\n\n      const response = await fetch(`${API}/users/profile/${user.id}`, {\n        method: 'PUT',\n        headers: {\n          'Content-Type': 'application/json',\n        },\n        body: JSON.stringify(backendProfileData)\n      });\n\n      const data = await response.json();\n      console.log('Profile update response:', { status: response.status, data });\n\n      if (response.ok) {\n        setUser(data);\n        localStorage.setItem('ai_companion_user', JSON.stringify(data));\n        toast.success('Profile updated successfully!');\n      } else {\n        console.error('Profile update failed:', response.status, data);\n        throw new Error(data.detail || `Failed to update profile (HTTP ${response.status})`);\n      }\n    } catch (error) {\n      console.error('Error updating profile:', error);\n      toast.error(`Failed to update profile: ${error.message}`);\n      throw error;\n    }\n  };\n\n  const deleteUserProfile = async () => {\n    try {\n      if (!user?.id) {\n        throw new Error('No user profile to delete');\n      }\n\n      const response = await fetch(`${API}/users/profile/${user.id}`, {\n        method: 'DELETE',\n        headers: {\n          'Content-Type': 'application/json',\n        },\n      });\n\n      if (response.ok) {\n        // Clear user data and redirect to setup\n        setUser(null);\n        setSessionId(null);\n        localStorage.removeItem('ai_companion_user');\n        setIsProfileSetupOpen(true);\n        toast.success('Profile deleted successfully!');\n      } else {\n        const data = await response.json();\n        throw new Error(data.detail || 'Failed to delete profile');\n      }\n    } catch (error) {\n      console.error('Error deleting profile:', error);\n      toast.error('Failed to delete profile');\n      throw error;\n    }\n  };\n\n  const saveParentalControls = async (controlsData) => {\n    try {\n      const response = await fetch(`${API}/users/${user.id}/parental-controls`, {\n        method: 'PUT',\n        headers: {\n          'Content-Type': 'application/json',\n        },\n        body: JSON.stringify(controlsData)\n      });\n\n      const data = await response.json();\n      if (response.ok) {\n        setParentalControls(data);\n        toast.success('Parental controls updated successfully!');\n      } else {\n        throw new Error(data.detail || 'Failed to update parental controls');\n      }\n    } catch (error) {\n      console.error('Error updating parental controls:', error);\n      throw error;\n    }\n  };\n\n  const WelcomeScreen = () => (\n    <div className=\"min-h-screen flex items-center justify-center p-4\">\n      <motion.div\n        initial={{ opacity: 0, scale: 0.9 }}\n        animate={{ opacity: 1, scale: 1 }}\n        transition={{ duration: 0.5 }}\n        className=\"max-w-4xl mx-auto text-center\"\n      >\n        {/* Hero Section */}\n        <div className=\"mb-12\">\n          <motion.div\n            initial={{ y: -20, opacity: 0 }}\n            animate={{ y: 0, opacity: 1 }}\n            transition={{ delay: 0.2 }}\n            className=\"w-24 h-24 bg-gradient-to-br from-blue-500 to-purple-600 rounded-3xl flex items-center justify-center mx-auto mb-6 shadow-2xl\"\n          >\n            <svg className=\"w-12 h-12 text-white\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n              <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M9.663 17h4.673M12 3v1m6.364 1.636l-.707.707M21 12h-1M4 12H3m3.343-5.657l-.707-.707m2.828 9.9a5 5 0 117.072 0l-.548.547A3.374 3.374 0 0014 18.469V19a2 2 0 11-4 0v-.531c0-.895-.356-1.754-.988-2.386l-.548-.547z\" />\n            </svg>\n          </motion.div>\n          \n          <motion.h1\n            initial={{ y: -20, opacity: 0 }}\n            animate={{ y: 0, opacity: 1 }}\n            transition={{ delay: 0.3 }}\n            className=\"text-4xl md:text-6xl font-bold bg-gradient-to-r from-blue-600 to-purple-600 bg-clip-text text-transparent mb-4\"\n          >\n            Meet Your AI Buddy\n          </motion.h1>\n          \n          <motion.p\n            initial={{ y: -20, opacity: 0 }}\n            animate={{ y: 0, opacity: 1 }}\n            transition={{ delay: 0.4 }}\n            className=\"text-xl text-gray-600 max-w-2xl mx-auto mb-8\"\n          >\n            Your smart companion for stories, songs, learning, and fun conversations. \n            Safe, educational, and designed just for you!\n          </motion.p>\n        </div>\n\n        {/* Features */}\n        <motion.div\n          initial={{ y: 20, opacity: 0 }}\n          animate={{ y: 0, opacity: 1 }}\n          transition={{ delay: 0.5 }}\n          className=\"grid grid-cols-1 md:grid-cols-3 gap-8 mb-12\"\n        >\n          <div className=\"bg-white/80 backdrop-blur-sm rounded-2xl p-6 shadow-xl border border-gray-100\">\n            <div className=\"w-12 h-12 bg-blue-100 rounded-xl flex items-center justify-center mx-auto mb-4\">\n              <svg className=\"w-6 h-6 text-blue-600\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M19 11a7 7 0 01-7 7m0 0a7 7 0 01-7-7m7 7v4m0 0H8m4 0h4m-4-8a3 3 0 01-3-3V5a3 3 0 016 0v6a3 3 0 01-3 3z\" />\n              </svg>\n            </div>\n            <h3 className=\"text-lg font-semibold text-gray-900 mb-2\">Voice Chat</h3>\n            <p className=\"text-gray-600\">Talk naturally with your AI companion using voice messages and responses.</p>\n          </div>\n\n          <div className=\"bg-white/80 backdrop-blur-sm rounded-2xl p-6 shadow-xl border border-gray-100\">\n            <div className=\"w-12 h-12 bg-purple-100 rounded-xl flex items-center justify-center mx-auto mb-4\">\n              <svg className=\"w-6 h-6 text-purple-600\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M12 6.253v13m0-13C10.832 5.477 9.246 5 7.5 5S4.168 5.477 3 6.253v13C4.168 18.477 5.754 18 7.5 18s3.332.477 4.5 1.253m0-13C13.168 5.477 14.754 5 16.5 5c1.746 0 3.332.477 4.5 1.253v13C19.832 18.477 18.246 18 16.5 18c-1.746 0-3.332.477-4.5 1.253\" />\n              </svg>\n            </div>\n            <h3 className=\"text-lg font-semibold text-gray-900 mb-2\">Stories & Songs</h3>\n            <p className=\"text-gray-600\">Enjoy bedtime stories, nursery rhymes, and educational content.</p>\n          </div>\n\n          <div className=\"bg-white/80 backdrop-blur-sm rounded-2xl p-6 shadow-xl border border-gray-100\">\n            <div className=\"w-12 h-12 bg-green-100 rounded-xl flex items-center justify-center mx-auto mb-4\">\n              <svg className=\"w-6 h-6 text-green-600\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M9 12l2 2 4-4m5.618-4.016A11.955 11.955 0 0112 2.944a11.955 11.955 0 01-8.618 3.04A12.02 12.02 0 003 9c0 5.591 3.824 10.29 9 11.622 5.176-1.332 9-6.03 9-11.622 0-1.042-.133-2.052-.382-3.016z\" />\n              </svg>\n            </div>\n            <h3 className=\"text-lg font-semibold text-gray-900 mb-2\">Safe & Secure</h3>\n            <p className=\"text-gray-600\">Built with child safety in mind, with parental controls and monitoring.</p>\n          </div>\n        </motion.div>\n\n        {/* CTA Button */}\n        <motion.button\n          initial={{ y: 20, opacity: 0 }}\n          animate={{ y: 0, opacity: 1 }}\n          transition={{ delay: 0.6 }}\n          onClick={() => setIsProfileSetupOpen(true)}\n          className=\"px-8 py-4 bg-gradient-to-r from-blue-500 to-purple-600 text-white rounded-2xl text-lg font-semibold hover:from-blue-600 hover:to-purple-700 transition-all duration-200 shadow-xl hover:shadow-2xl transform hover:scale-105\"\n        >\n          Get Started\n        </motion.button>\n      </motion.div>\n    </div>\n  );\n\n  const ChatPage = () => (\n    <div className=\"h-screen flex flex-col\">\n      <Header \n        user={user} \n        onOpenProfile={() => setIsProfileSetupOpen(true)}\n        onOpenSettings={() => setIsParentalControlsOpen(true)}\n      />\n      <div className=\"flex-1 overflow-hidden\">\n        <SimplifiedChatInterface \n          user={user} \n          sessionId={sessionId}\n          darkMode={darkMode}\n          setDarkMode={setDarkMode}\n          messages={chatMessages}\n          onAddMessage={addMessage}\n        />\n      </div>\n    </div>\n  );\n\n  const StoriesPageWrapper = () => (\n    <div className=\"h-screen flex flex-col\">\n      <Header \n        user={user} \n        onOpenProfile={() => setIsProfileSetupOpen(true)}\n        onOpenSettings={() => setIsParentalControlsOpen(true)}\n      />\n      <div className=\"flex-1 overflow-auto\">\n        <StoriesPage \n          user={user} \n          sessionId={sessionId}\n        />\n      </div>\n    </div>\n  );\n\n  const ProfilePageWrapper = () => (\n    <div className=\"h-screen flex flex-col\">\n      <Header \n        user={user} \n        onOpenProfile={() => setIsProfileSetupOpen(true)}\n        onOpenSettings={() => setIsParentalControlsOpen(true)}\n      />\n      <div className=\"flex-1 overflow-auto\">\n        <ProfilePage \n          user={user} \n          onOpenProfileSetup={() => setIsProfileSetupOpen(true)}\n        />\n      </div>\n    </div>\n  );\n\n  const SettingsPageWrapper = () => (\n    <div className=\"h-screen flex flex-col\">\n      <Header \n        user={user} \n        onOpenProfile={() => setIsProfileSetupOpen(true)}\n        onOpenSettings={() => setIsParentalControlsOpen(true)}\n      />\n      <div className=\"flex-1 overflow-auto\">\n        <SettingsPage \n          user={user} \n          onOpenProfile={() => setIsProfileSetupOpen(true)}\n          onOpenParentalControls={() => setIsParentalControlsOpen(true)}\n        />\n      </div>\n    </div>\n  );\n\n  if (isLoading) {\n    return (\n      <Layout>\n        <div className=\"min-h-screen flex items-center justify-center\">\n          <div className=\"text-center\">\n            <div className=\"w-16 h-16 border-4 border-blue-500 border-t-transparent rounded-full animate-spin mx-auto mb-4\"></div>\n            <p className=\"text-gray-600\">Loading your AI companion...</p>\n          </div>\n        </div>\n      </Layout>\n    );\n  }\n\n  return (\n    <Layout>\n      <BrowserRouter>\n        <Routes>\n          <Route path=\"/\" element={user ? <Navigate to=\"/chat\" /> : <WelcomeScreen />} />\n          <Route path=\"/chat\" element={user ? <ChatPage /> : <Navigate to=\"/\" />} />\n          <Route path=\"/stories\" element={user ? <StoriesPageWrapper /> : <Navigate to=\"/\" />} />\n          <Route path=\"/profile\" element={user ? <ProfilePageWrapper /> : <Navigate to=\"/\" />} />\n          <Route path=\"/settings\" element={user ? <SettingsPageWrapper /> : <Navigate to=\"/\" />} />\n        </Routes>\n      </BrowserRouter>\n\n      {/* Modals */}\n      <ProfileSetup\n        isOpen={isProfileSetupOpen}\n        onClose={() => setIsProfileSetupOpen(false)}\n        onSave={user ? updateUserProfile : saveUserProfile}\n        onDelete={user ? deleteUserProfile : null}\n        initialData={user}\n      />\n\n      <ParentalControls\n        isOpen={isParentalControlsOpen}\n        onClose={() => setIsParentalControlsOpen(false)}\n        userId={user?.id}\n        controls={parentalControls}\n        onSave={saveParentalControls}\n      />\n    </Layout>\n  );\n};\n\nexport default App;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}